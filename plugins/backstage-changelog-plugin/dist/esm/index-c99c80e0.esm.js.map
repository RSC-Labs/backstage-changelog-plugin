{"version":3,"file":"index-c99c80e0.esm.js","sources":["../../src/util/defaultParser.tsx","../../src/components/ChangelogSmallTable.tsx","../../src/components/ChangelogAnnotationsEmptyState.tsx","../../src/components/EntityChangelogCard.tsx","../../src/components/ChangelogFullTable.tsx","../../src/components/EntityChangelogContent.tsx"],"sourcesContent":["/*\n * Copyright 2023 RSC-Labs, https://rsoftcon.com/\n *\n * Licensed under the Mozilla Public License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.mozilla.org/en-US/MPL/2.0/\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { ChangelogProps } from \"./types\";\nimport { StatusError, StatusOK, StatusPending, StatusRunning, StatusWarning } from '@backstage/core-components';\n\nenum EChangelogAction {\n    Added = 'Added',\n    Fixed = 'Fixed',\n    Changed = 'Changed',\n    Removed = 'Removed',\n    Deprecated = 'Deprecated',\n    Security = 'Security'\n}\n\n// Default parser follows https://keepachangelog.com/\nexport function defaultParser(content: string) : ChangelogProps[] {\n    let splittedLines = content.split(/\\r?\\n/);\n\n    let changelogIndex = -1;\n\n    let action: string | undefined;\n    let ActionIcon: any;\n    let actionContent: string | undefined;\n    let versionContent: string | undefined;\n    let actionCounter: number = 0;\n\n\n    const changelogParsed = splittedLines.reduce((resultArray: ChangelogProps[], item: string) => {\n      if (item.startsWith('## ')) {\n        if (action && actionContent && versionContent) {\n          resultArray[changelogIndex].actions.push(\n            {\n              name: action,\n              content: actionContent,\n              counter: actionCounter,\n              icon: ActionIcon\n            }\n          )\n          resultArray[changelogIndex].versionContent = versionContent;\n        }\n\n        action = undefined;\n        actionContent = undefined;\n        versionContent = undefined;\n\n        changelogIndex++;\n\n        resultArray[changelogIndex] = {\n          versionNumber: item,\n          actions: [],\n          versionContent: undefined\n        }\n      };\n      if (item.startsWith('### ')) {\n        if (action && actionContent) {\n          resultArray[changelogIndex].actions.push(\n            {\n              name: action,\n              content: actionContent,\n              counter: actionCounter,\n              icon: ActionIcon\n            }\n          )\n          action = undefined;\n          actionContent = undefined;\n          actionCounter = 0;\n        }\n\n        if (item.includes(`### ${EChangelogAction.Added}`)) {\n          action = EChangelogAction.Added;\n          ActionIcon = () =>  <StatusOK></StatusOK>\n        }\n        if (item.includes(`### ${EChangelogAction.Fixed}`)) {\n          action = EChangelogAction.Fixed;\n          ActionIcon = () =>  <StatusRunning></StatusRunning>\n        }\n        if (item.includes(`### ${EChangelogAction.Changed}`)) {\n          action = EChangelogAction.Changed;\n          ActionIcon = () =>  <StatusPending></StatusPending>\n        }\n        if (item.includes(`### ${EChangelogAction.Removed}`)) {\n          action = EChangelogAction.Removed;\n          ActionIcon = () =>  <StatusError></StatusError>\n        }\n        if (item.includes(`### ${EChangelogAction.Deprecated}`)) {\n          action = EChangelogAction.Deprecated;\n          ActionIcon = () =>  <StatusWarning></StatusWarning>\n        }\n        if (item.includes(`### ${EChangelogAction.Security}`)) {\n          action = EChangelogAction.Deprecated;\n          ActionIcon = () =>  <StatusPending></StatusPending>\n        }\n      }\n      if (item.startsWith('-')) {\n        actionCounter++;\n        if (actionContent) {\n          actionContent += (item + '\\n')\n        } else {\n          actionContent = item + '\\n';\n        }\n      }\n      if (versionContent) {\n        versionContent += (item + '\\n')\n      } else {\n        versionContent = item + '\\n';\n      }\n\n      return resultArray;\n    }, [])\n\n    return changelogParsed;\n  }","/*\n * Copyright 2023 RSC-Labs, https://rsoftcon.com/\n *\n * Licensed under the Mozilla Public License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.mozilla.org/en-US/MPL/2.0/\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from 'react';\nimport {\n  Button,\n  Dialog,\n  DialogContent,\n  Grid,\n} from '@material-ui/core';\nimport { Table, TableColumn } from '@backstage/core-components';\nimport { MarkdownContent } from '@backstage/core-components';\nimport { OverridableComponent } from '@mui/material/OverridableComponent';\nimport { ChangelogAction, ChangelogProps } from '../util/types';\n\nconst ActionCounter = ({actionName, counter, Icon} : {actionName: string, counter: number, Icon?: OverridableComponent<any>}) => {\n  return <Grid container alignItems='center'>\n    {Icon && <Grid item>\n      <Icon/>\n    </Grid>\n    }\n    <Grid item>\n      {counter} {actionName}\n    </Grid>\n  </Grid>\n}\n\nconst ChangelogActionsCounters = ({changelogActions} : {changelogActions: ChangelogAction[]}) => {\n  return (\n    <>\n    {changelogActions.map(changelogAction => {\n        if (changelogAction.counter) {\n          return <ActionCounter actionName={changelogAction.name} counter={changelogAction.counter} key={changelogAction.name} Icon={changelogAction.icon}></ActionCounter>\n        }\n        return null;\n    })}\n    </>\n  )\n}\n\nconst SeeChangesButton = ({contentMd} : {contentMd: string}) => {\n  const [open, setOpen] = useState(false);\n  \n  const openDialog = () => {\n    setOpen(true);\n  };\n  \n  const closeDialog = () => {\n    setOpen(false);\n  };\n  \n  const dialogContent = () => {\n    return <MarkdownContent content={contentMd}/>;\n  };\n  \n  return (\n    <>\n      <Button color=\"primary\" variant=\"contained\" onClick={openDialog}>\n        See changes\n      </Button>\n      <Dialog\n        open={open}\n        onClose={closeDialog}\n          aria-labelledby=\"dialog-title\"\n          aria-describedby=\"dialog-description\"\n        >\n          <DialogContent>{dialogContent()}</DialogContent>\n        </Dialog>\n      </>\n    );\n};\n\n\nexport const ChangelogSmallTable = ({changelogInfos} : {changelogInfos: ChangelogProps[]}) => {\n    const columns: TableColumn[] = [\n      {\n        title: 'Version',\n        highlight: true,\n        render: (changelogInfo: any) => (\n          <MarkdownContent content={changelogInfo.versionNumber}/>\n        )\n      },\n      {\n        title: 'Actions',\n        render: (changelogInfo: any) => (\n          <ChangelogActionsCounters changelogActions={changelogInfo.actions}/>\n        ),\n        customFilterAndSearch: (filter: string, rowData: any, _) => {\n          if (rowData.actions.length) {\n            return (rowData.actions.find((action: { name: string; }) => action.name.toLowerCase().includes(filter.toLowerCase())) !== undefined);\n          }\n          return false;\n        },\n      },\n      {\n        title: 'Changes',\n        render: (changelogInfo: any) => {\n          return (\n            <>\n            {changelogInfo.versionContent && <SeeChangesButton contentMd={changelogInfo.versionContent}/>}\n            </>\n          )\n        }\n      },\n    ];\n\n    return (\n        <Table\n          options={{ \n            pageSize: 5,\n          }}\n          data={changelogInfos}\n          columns={columns}\n          title=\"Changelog\"\n        />\n    );\n};","/*\n * Copyright 2023 RSC-Labs, https://rsoftcon.com/\n *\n * Licensed under the Mozilla Public License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.mozilla.org/en-US/MPL/2.0/\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, Typography } from '@material-ui/core';\nimport { CodeSnippet, EmptyState, LinkButton } from '@backstage/core-components';\nimport { CHANGELOG_ANNOTATION_NAME, CHANGELOG_ANNOTATION_REF } from '../util';\nimport { ANNOTATION_SOURCE_LOCATION } from '@backstage/catalog-model';\n\nconst missingSourceLocation = \n`\n  annotations:\n    ${ANNOTATION_SOURCE_LOCATION}: \"file:/path-to-directory/\"\n`\nconst missingSourceLocationAndName = \n`\n  annotations:\n    ${ANNOTATION_SOURCE_LOCATION}: \"file:/path-to-directory/\"\n    ${CHANGELOG_ANNOTATION_NAME}: \"CHANGELOG.md\"\n`\nconst missingChangelogFileRef = \n`\n  annotations:\n    ${CHANGELOG_ANNOTATION_REF}: \"url:https://github.com/RSC-Labs/backstage-changelog-plugin/tree/main/examples/CHANGELOG.md\"\n`\n\nexport const ChangelogAnnotationsEmptyState = () => {\n    return (\n        <EmptyState \n            missing=\"field\"\n            title='Changelog plugin'\n            description='Missing Annotations'\n            action={\n            <>\n                <Typography variant=\"body1\">\n                You need to properly configure your annotations.\n                One of below configuration is needed:\n                </Typography>\n                <Box>\n                <CodeSnippet\n                    text={missingSourceLocation}\n                    language=\"yaml\"\n                    showLineNumbers\n                    customStyle={{ background: 'inherit', fontSize: '115%' }}\n                />\n                <CodeSnippet\n                    text={missingSourceLocationAndName}\n                    language=\"yaml\"\n                    showLineNumbers\n                    customStyle={{ background: 'inherit', fontSize: '115%' }}\n                />\n                <CodeSnippet\n                    text={missingChangelogFileRef}\n                    language=\"yaml\"\n                    showLineNumbers\n                    customStyle={{ background: 'inherit', fontSize: '115%' }}\n                />\n                </Box>\n                <LinkButton color=\"primary\" to='https://github.com/RSC-Labs/backstage-changelog-plugin#backend-plugin'>\n                Read more\n                </LinkButton>\n            </>\n            }\n        />\n    );\n}","/*\n * Copyright 2023 RSC-Labs, https://rsoftcon.com/\n *\n * Licensed under the Mozilla Public License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.mozilla.org/en-US/MPL/2.0/\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { LinearProgress } from '@material-ui/core';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { EntityChangelogProps, ChangelogProps } from '../util/types';\nimport { defaultParser } from '../util';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { changelogApiRef } from '../api';\nimport { Alert } from '@material-ui/lab';\nimport { ChangelogSmallTable } from './ChangelogSmallTable';\nimport { isChangelogAnnotationConfigurationOk } from '../util/constants';\nimport { ChangelogAnnotationsEmptyState } from './ChangelogAnnotationsEmptyState';\n\nexport const ChangelogCard = (props: EntityChangelogProps) => {\n    \n    const changelogApi = useApi(changelogApiRef);\n\n    const { entity } = useEntity();\n\n    if (!isChangelogAnnotationConfigurationOk(entity)) {\n      return ChangelogAnnotationsEmptyState();\n    }\n    const { value, loading, error } = useAsync(async () => {\n        return changelogApi.readChangelog(entity)\n    })\n\n    if (loading) {\n      return <LinearProgress/>\n    }\n    if (error) {\n      return <Alert severity='error'>{JSON.stringify(error)}</Alert>\n    }\n\n    if (value) {\n      const changelogInfos: ChangelogProps[] = props.parser ? props.parser(value) : defaultParser(value)\n      return (\n        <ChangelogSmallTable changelogInfos={changelogInfos}/>\n      );\n    }\n    return <></>\n}","/*\n * Copyright 2023 RSC-Labs, https://rsoftcon.com/\n *\n * Licensed under the Mozilla Public License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.mozilla.org/en-US/MPL/2.0/\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Table, TableColumn } from '@backstage/core-components';\nimport { MarkdownContent } from '@backstage/core-components';\nimport { ChangelogAction, ChangelogProps } from '../util/types';\n\nconst generateActionColumns = (changelogInfos: ChangelogProps[]) => {\n    const actionColumns: TableColumn[] = [];\n    if (changelogInfos.length) {\n        for (let j = 0; j < changelogInfos.length; j++) {\n          for (let i = 0; i < changelogInfos[j].actions.length; i++) {\n            if (!actionColumns.some(actionColumn => actionColumn.title === changelogInfos[j].actions[i].name)) {\n              actionColumns.push(\n                {\n                    title: changelogInfos[j].actions[i].name,\n                    render: (changelogInfo: any) => {\n                        const columnAction: ChangelogAction | undefined = changelogInfo.actions.find((action: { name: string; }) => action.name === changelogInfos[j].actions[i].name);\n                        return (\n                            <>\n                                {columnAction !== undefined && <MarkdownContent content={columnAction.content}/>}\n                            </>\n                        ) \n                    },\n                    customFilterAndSearch(filter: string, rowData: any, _) {\n                      if (rowData.actions.length) {\n                        return (rowData.actions.find((action: { content: string; }) => action.content.toLowerCase().includes(filter.toLowerCase())) !== undefined);\n                      }\n                      return false;\n                    },\n                }\n              )\n            }\n          }\n        }\n    }\n    return actionColumns;\n    \n}\n\nexport const ChangelogFullTable = ({changelogInfos} : {changelogInfos: ChangelogProps[]}) => {\n    const actionColumns: TableColumn[] = generateActionColumns(changelogInfos);\n    const columns: TableColumn[] = [\n      {\n        title: 'Version',\n        highlight: true,\n        render: (changelogInfo: any) => (\n          <MarkdownContent content={changelogInfo.versionNumber}/>\n        )\n      },\n        ...actionColumns\n    ];\n\n    return (\n        <Table\n          options={{ \n            pageSize: 5,\n          }}\n          data={changelogInfos}\n          columns={columns}\n          title=\"Changelog\"\n        />\n    );\n};","/*\n * Copyright 2023 RSC-Labs, https://rsoftcon.com/\n *\n * Licensed under the Mozilla Public License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.mozilla.org/en-US/MPL/2.0/\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { LinearProgress } from '@material-ui/core';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { EntityChangelogProps, ChangelogProps } from '../util/types';\nimport { defaultParser } from '../util';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { changelogApiRef } from '../api';\nimport { Alert } from '@material-ui/lab';\nimport { ChangelogFullTable } from './ChangelogFullTable';\nimport { isChangelogAnnotationConfigurationOk } from '../util/constants';\nimport { ChangelogAnnotationsEmptyState } from './ChangelogAnnotationsEmptyState';\n\nexport const ChangelogContent = (props: EntityChangelogProps) => {\n\n    const changelogApi = useApi(changelogApiRef);\n\n    const { entity } = useEntity();\n\n    if (!isChangelogAnnotationConfigurationOk(entity)) {\n      return ChangelogAnnotationsEmptyState();\n    }\n\n    const { value, loading, error } = useAsync(async () => {\n        return changelogApi.readChangelog(entity)\n    })\n\n    if (loading) {\n      return <LinearProgress/>\n    }\n    if (error) {\n      return <Alert severity='error'>{JSON.stringify(error)}</Alert>\n    }\n\n    if (value) {\n      const changelogInfos: ChangelogProps[] = props.parser ? props.parser(value) : defaultParser(value)\n      return (\n        <ChangelogFullTable changelogInfos={changelogInfos}/>\n      );\n    }\n    return <></>\n}"],"names":[],"mappings":"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"}